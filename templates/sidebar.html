{% load static %}

<!-- Sidebar lateral -->
<aside id="sidebar" class="bg-white dark:bg-gray-900 w-64 min-h-screen border-r border-gray-200 dark:border-gray-700 fixed left-0 top-0 transform -translate-x-full md:translate-x-0 transition-transform duration-200 ease-in-out z-40">
  <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
    <a href="/" class="flex items-center space-x-2">
      <img src="{% static 'img/logo.svg' %}" alt="Logo" class="h-8 w-8">
      <span class="text-lg font-semibold text-gray-800 dark:text-gray-200">Admin One</span>
    </a>
    <button id="sidebar-close" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 md:hidden">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2"
        viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
        <path d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
  </div>

  <!-- Menu -->
  <nav class="mt-4">
    <ul class="space-y-1 px-2">

      <!-- Dashboard -->
      <li>
        <a href="{% url 'dashboard' %}" class="flex items-center p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-200">
          <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 12l2-2m0 0l7-7 7 7M13 5v6h6"/>
          </svg>
          Dashboard
        </a>
      </li>

      <!-- Clientes -->
      <li>
        <a href="{% url 'clientes_lista' %}" class="flex items-center p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-200">
          <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M17 20h5v-2a4 4 0 00-3-3.87M9 20H4v-2a4 4 0 013-3.87M12 12a4 4 0 100-8 4 4 0 000 8z"/>
          </svg>
          Clientes
        </a>
      </li>

      <!-- Vendas -->
      <li>
        <a href="{% url 'vendas_lancar' %}" class="flex items-center p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-200">
          <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 8c-3.314 0-6 2.239-6 5s2.686 5 6 5 6-2.239 6-5-2.686-5-6-5zm0 0V3m0 0L8 7m4-4l4 4"/>
          </svg>
          Lançar Vendas
        </a>
      </li>

      <!-- Financeiro -->
      <li>
        <a href="{% url 'financeiro_resumo' %}" class="flex items-center p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-200">
          <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 8c-3.314 0-6 2.239-6 5s2.686 5 6 5 6-2.239 6-5-2.686-5-6-5zm0 0V3m0 0L8 7m4-4l4 4"/>
          </svg>
          Financeiro
        </a>
      </li>

      <!-- Relatórios -->
      <li>
        <a href="{% url 'relatorios' %}" class="flex items-center p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-200">
          <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4h16v16H4V4zm8 8v8M8 12v8M16 12v8"/>
          </svg>
          Relatórios
        </a>
      </li>

      <!-- Configurações (somente admin) -->
      {% if user.is_staff %}
      <li>
        <a href="/admin/" class="flex items-center p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-200">
          <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 9v3m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          Administração
        </a>
      </li>
      {% endif %}

    </ul>
  </nav>

  <!-- Rodapé do menu -->
  <div class="absolute bottom-0 w-full p-4 border-t border-gray-200 dark:border-gray-700">
    {% if user.is_authenticated %}
      <p class="text-sm text-gray-600 dark:text-gray-400">
        Logado como: <strong>{{ user.username }}</strong>
      </p>
    {% else %}
      <a href="{% url 'login' %}" class="text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200">
        Entrar
      </a>
    {% endif %}
  </div>
</aside>

<!-- Script para abrir/fechar sidebar -->
<script>
  const sidebar = document.getElementById('sidebar');
  const closeBtn = document.getElementById('sidebar-close');
  const menuToggle = document.getElementById('menu-toggle');

  closeBtn?.addEventListener('click', () => sidebar.classList.add('-translate-x-full'));
  menuToggle?.addEventListener('click', () => sidebar.classList.toggle('-translate-x-full'));
</script>
